# Hello, Sui!

[이전 섹션](./hello-world)에서 우리는 새로운 패키지를 생성하고 Move 패키지를 생성, 빌드, 테스트하는 기본 흐름을 시연했습니다. 이 섹션에서는 스토리지 모델을 사용하고 상호작용할 수 있는 간단한 애플리케이션을 작성하겠습니다. 이를 위해 간단한 할 일 목록 애플리케이션을 만들 것입니다.

## 새 패키지 생성하기

[Hello, World!](./hello-world)와 동일한 흐름을 따라 `todo_list`라는 새 패키지를 생성합니다.

```bash
$ sui move new todo_list
```

## 코드 추가하기

시간을 절약하고 애플리케이션 로직에 집중하기 위해 할 일 목록 애플리케이션의 코드를 제공하겠습니다. _sources/todo_list.move_ 파일의 내용을 다음 코드로 교체하세요:

> 참고: 내용이 처음에는 압도적으로 보일 수 있지만, 다음 섹션에서 분해하여 설명하겠습니다. 지금은 당면한 작업에 집중하려고 노력하세요.

```move file=packages/todo_list/sources/todo_list.move anchor=all
/// 모듈: todo_list
module todo_list::todo_list;

use std::string::String;

/// 할 일 목록. 소유자가 관리할 수 있고 다른 사람과 공유할 수 있습니다.
public struct TodoList has key, store {
    id: UID,
    items: vector<String>
}

/// 새로운 할 일 목록을 생성합니다.
public fun new(ctx: &mut TxContext): TodoList {
    let list = TodoList {
        id: object::new(ctx),
        items: vector[]
    };

    (list)
}

/// 목록에 새로운 할 일 항목을 추가합니다.
public fun add(list: &mut TodoList, item: String) {
    list.items.push_back(item);
}

/// 인덱스로 목록에서 할 일 항목을 제거합니다.
public fun remove(list: &mut TodoList, index: u64): String {
    list.items.remove(index)
}

/// 목록과 그것을 관리하는 capability를 삭제합니다.
public fun delete(list: TodoList) {
    let TodoList { id, items: _ } = list;
    id.delete();
}

/// 목록의 항목 수를 가져옵니다.
public fun length(list: &TodoList): u64 {
    list.items.length()
}
```

## 패키지 빌드하기

모든 것을 올바르게 했는지 확인하기 위해 `sui move build` 명령어를 실행하여 패키지를 빌드해 봅시다. 모든 것이 정확하다면 다음과 유사한 출력을 볼 수 있어야 합니다:

```bash
$ sui move build
UPDATING GIT DEPENDENCY https://github.com/MystenLabs/sui.git
INCLUDING DEPENDENCY Bridge
INCLUDING DEPENDENCY DeepBook
INCLUDING DEPENDENCY SuiSystem
INCLUDING DEPENDENCY Sui
INCLUDING DEPENDENCY MoveStdlib
BUILDING todo_list
```

이 출력 다음에 오류가 없다면 패키지를 성공적으로 빌드한 것입니다. 오류가 있다면 다음을 확인하세요:

- 코드가 올바르게 복사되었는지
- 파일 이름과 패키지 이름이 올바른지

이 단계에서 코드가 실패할 다른 이유는 많지 않습니다. 그래도 여전히 문제가 있다면 [이 위치](https://github.com/MystenLabs/move-book/tree/main/packages/todo_list)에서 패키지 구조를 확인해 보세요.

## 계정 설정하기

> 이미 계정이 설정되어 있다면 이 단계를 건너뛸 수 있습니다.

패키지를 게시하고 상호작용하려면 계정을 설정해야 합니다. 개발 중에 가장 좋은 옵션은 자체 [로컬 네트워크](https://docs.sui.io/guides/developer/getting-started/local-network)를 실행하는 것입니다. 지금은 `RUST_LOG="off,sui_node=info" sui start --with-faucet --force-regenesis`를 실행하기만 하면 됩니다. Sui 로컬 네트워크는 컴퓨터의 포트 9000에서 실행되므로 해당 포트가 다른 애플리케이션에서 사용되지 않는지 확인하세요.

처음 하는 경우 새 계정을 생성해야 합니다. 이를 위해 `sui client` 명령어를 실행하면 CLI가 여러 질문을 표시합니다. 답변은 아래에 `>`로 표시되어 있습니다:

```bash
$ sui client
Config file ["/path/to/home/.sui/sui_config/client.yaml"] doesn't exist, do you want to connect to a Sui Full node server [y/N]?
> y
Sui Full node server URL (Defaults to Sui Testnet if not specified) :
> http://127.0.0.1:9000
Environment alias for [http://127.0.0.1:9000] :
> localnet
Select key scheme to generate keypair (0 for ed25519, 1 for secp256k1, 2: for secp256r1):
> 0
```

질문에 답한 후 CLI는 새 키 쌍을 생성하고 구성 파일에 저장합니다. 이제 이 계정을 사용하여 네트워크와 상호작용할 수 있습니다.

계정이 올바르게 설정되었는지 확인하려면 `sui client active-address` 명령어를 실행하세요:

```bash
$ sui client active-address
0x....
```

명령어는 계정 주소를 출력합니다. `0x`로 시작하고 64자가 이어집니다.

## 코인 요청하기

_devnet_ 및 _testnet_ 환경에서 CLI는 네트워크와 상호작용할 수 있도록 계정에 코인을 요청하는 방법을 제공합니다. 코인을 요청하려면 `sui client faucet` 명령어를 실행하세요:

```bash
$ sui client faucet
Request successful. It can take up to 1 minute to get the coin. Run sui client gas to check your gas coins.
```

잠시 기다린 후 `sui client balance` 명령어를 실행하여 Coin object가 계정으로 전송되었는지 확인할 수 있습니다:

```bash
$ sui client balance
╭────────────────────────────────────────╮
│ Balance of coins owned by this address │
├────────────────────────────────────────┤
│ ╭──────────────────────────────────╮   │
│ │ coin  balance (raw)  balance     │   │
│ ├──────────────────────────────────┤   │
│ │ Sui   1000000000    1.00 SUI     │   │
│ ╰──────────────────────────────────╯   │
╰────────────────────────────────────────╯
```

또는 `sui client objects` 명령어를 실행하여 계정이 소유한 _object_를 쿼리할 수 있습니다. object ID는 고유하고 digest도 마찬가지이므로 실제 출력은 다르지만 구조는 유사합니다:

```bash
$ sui client objects
╭───────────────────────────────────────────────────────────────────────────────────────╮
│ ╭────────────┬──────────────────────────────────────────────────────────────────────╮ │
│ │ objectId   │  0x4ea1303e4f5e2f65fc3709bc0fb70a3035fdd2d53dbcff33e026a50a742ce0de  │ │
│ │ version    │  4                                                                   │ │
│ │ digest     │  nA68oa8gab/CdIRw+240wze8u0P+sRe4vcisbENcR4U=                        │ │
│ │ objectType │  0x0000..0002::coin::Coin                                            │ │
│ ╰────────────┴──────────────────────────────────────────────────────────────────────╯ │
╰───────────────────────────────────────────────────────────────────────────────────────╯
```

이제 계정이 설정되고 계정에 코인이 있으므로 네트워크와 상호작용할 수 있습니다. 패키지를 네트워크에 게시하는 것부터 시작하겠습니다.

## 게시하기

패키지를 네트워크에 게시하려면 `sui client publish` 명령어를 사용합니다. 이 명령어는 자동으로 패키지를 빌드하고 바이트코드를 사용하여 단일 트랜잭션으로 게시합니다.

> 게시하는 동안 `--gas-budget` 인자를 사용하고 있습니다. 이는 트랜잭션에 얼마나 많은 가스를 사용할 의향이 있는지를 지정합니다. 이 섹션에서는 이 주제를 다루지 않겠지만, Sui의 모든 트랜잭션은 가스를 소비하며 가스는 SUI 코인으로 지불된다는 것을 알아야 합니다.

`gas-budget`은 _MIST_ 단위로 지정됩니다. 1 SUI는 10^9 MIST와 같습니다. 시연을 위해 100,000,000 MIST(0.1 SUI)를 사용하겠습니다.

```bash
# `todo_list` 폴더에서 실행
$ sui client publish --gas-budget 100000000

# 또는 패키지 경로를 지정할 수 있습니다
$ sui client publish --gas-budget 100000000 todo_list
```

게시 명령어의 출력은 다소 길기 때문에 부분적으로 보여주고 설명하겠습니다.

```bash
$ sui client publish --gas-budget 100000000
UPDATING GIT DEPENDENCY https://github.com/MystenLabs/sui.git
INCLUDING DEPENDENCY Bridge
INCLUDING DEPENDENCY DeepBook
INCLUDING DEPENDENCY SuiSystem
INCLUDING DEPENDENCY Sui
INCLUDING DEPENDENCY MoveStdlib
BUILDING todo_list
Successfully verified dependencies on-chain against source.
Transaction Digest: GpcDV6JjjGQMRwHpEz582qsd5MpCYgSwrDAq1JXcpFjW
```

보시다시피 `publish` 명령어를 실행하면 CLI는 먼저 패키지를 빌드한 다음 체인상의 의존성을 확인하고 마지막으로 패키지를 게시합니다. 명령어의 출력은 트랜잭션 다이제스트로, 트랜잭션의 고유 식별자이며 트랜잭션 상태를 쿼리하는 데 사용할 수 있습니다.

### 트랜잭션 데이터

`TransactionData`라는 제목의 섹션에는 방금 보낸 트랜잭션에 대한 정보가 포함되어 있습니다. 여기에는 당신의 주소인 `sender`, `--gas-budget` 인자로 설정된 `gas_budget`, 결제에 사용한 Coin과 같은 필드가 있습니다. 또한 CLI가 실행한 Commands를 출력합니다. 이 예에서는 `Publish`와 `TransferObject` 명령어가 실행되었습니다 - 후자는 특별한 object인 `UpgradeCap`을 발신자에게 전송합니다.

```plaintext
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Transaction Data                                                                                             │
├──────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Sender: 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1                                   │
│ Gas Owner: 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1                                │
│ Gas Budget: 100000000 MIST                                                                                   │
│ Gas Price: 1000 MIST                                                                                         │
│ Gas Payment:                                                                                                 │
│  ┌──                                                                                                         │
│  │ ID: 0x4ea1303e4f5e2f65fc3709bc0fb70a3035fdd2d53dbcff33e026a50a742ce0de                                    │
│  │ Version: 7                                                                                                │
│  │ Digest: AXYPnups8A5J6pkvLa6RekX2ye3qur66EZ88mEbaUDQ1                                                      │
│  └──                                                                                                         │
│                                                                                                              │
│ Transaction Kind: Programmable                                                                               │
│ ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────╮ │
│ │ Input Objects                                                                                            │ │
│ ├──────────────────────────────────────────────────────────────────────────────────────────────────────────┤ │
│ │ 0   Pure Arg: Type: address, Value: "0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1" │ │
│ ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│ ╭─────────────────────────────────────────────────────────────────────────╮                                  │
│ │ Commands                                                                │                                  │
│ ├─────────────────────────────────────────────────────────────────────────┤                                  │
│ │ 0  Publish:                                                             │                                  │
│ │  ┌                                                                      │                                  │
│ │  │ Dependencies:                                                        │                                  │
│ │  │   0x0000000000000000000000000000000000000000000000000000000000000001 │                                  │
│ │  │   0x0000000000000000000000000000000000000000000000000000000000000002 │                                  │
│ │  └                                                                      │                                  │
│ │                                                                         │                                  │
│ │ 1  TransferObjects:                                                     │                                  │
│ │  ┌                                                                      │                                  │
│ │  │ Arguments:                                                           │                                  │
│ │  │   Result 0                                                           │                                  │
│ │  │ Address: Input  0                                                    │                                  │
│ │  └                                                                      │                                  │
│ ╰─────────────────────────────────────────────────────────────────────────╯                                  │
│                                                                                                              │
│ Signatures:                                                                                                  │
│    gebjSbVwZwTkizfYg2XIuzdx+d66VxFz8EmVaisVFiV3GkDay6L+hQG3n2CQ1hrWphP6ZLc7bd1WRq4ss+hQAQ==                  │
│                                                                                                              │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
```

### 트랜잭션 효과

Transaction Effects에는 트랜잭션의 상태, 트랜잭션이 네트워크 상태에 가한 변경 사항 및 트랜잭션에 관련된 object가 포함됩니다.

```plaintext
╭───────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Transaction Effects                                                                               │
├───────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Digest: GpcDV6JjjGQMRwHpEz582qsd5MpCYgSwrDAq1JXcpFjW                                              │
│ Status: Success                                                                                   │
│ Executed Epoch: 411                                                                               │
│                                                                                                   │
│ Created Objects:                                                                                  │
│  ┌──                                                                                              │
│  │ ID: 0x160f7856e13b27e5a025112f361370f4efc2c2659cb0023f1e99a8a84d1652f3                         │
│  │ Owner: Account Address ( 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1 )  │
│  │ Version: 8                                                                                     │
│  │ Digest: 8y6bhwvQrGJHDckUZmj2HDAjfkyVqHohhvY1Fvzyj7ec                                           │
│  └──                                                                                              │
│  ┌──                                                                                              │
│  │ ID: 0x468daa33dfcb3e17162bbc8928f6ec73744bb08d838d1b6eb94eac99269b29fe                         │
│  │ Owner: Immutable                                                                               │
│  │ Version: 1                                                                                     │
│  │ Digest: Ein91NF2hc3qC4XYoMUFMfin9U23xQmDAdEMSHLae7MK                                           │
│  └──                                                                                              │
│ Mutated Objects:                                                                                  │
│  ┌──                                                                                              │
│  │ ID: 0x4ea1303e4f5e2f65fc3709bc0fb70a3035fdd2d53dbcff33e026a50a742ce0de                         │
│  │ Owner: Account Address ( 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1 )  │
│  │ Version: 8                                                                                     │
│  │ Digest: 7ydahjaM47Gyb33PB4qnW2ZAGqZvDuWScV6sWPiv7LTc                                           │
│  └──                                                                                              │
│ Gas Object:                                                                                       │
│  ┌──                                                                                              │
│  │ ID: 0x4ea1303e4f5e2f65fc3709bc0fb70a3035fdd2d53dbcff33e026a50a742ce0de                         │
│  │ Owner: Account Address ( 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1 )  │
│  │ Version: 8                                                                                     │
│  │ Digest: 7ydahjaM47Gyb33PB4qnW2ZAGqZvDuWScV6sWPiv7LTc                                           │
│  └──                                                                                              │
│ Gas Cost Summary:                                                                                 │
│    Storage Cost: 10404400 MIST                                                                    │
│    Computation Cost: 1000000 MIST                                                                 │
│    Storage Rebate: 978120 MIST                                                                    │
│    Non-refundable Storage Fee: 9880 MIST                                                          │
│                                                                                                   │
│ Transaction Dependencies:                                                                         │
│    7Ukrc5GqdFqTA41wvWgreCdHn2vRLfgQ3YMFkdks72Vk                                                   │
│    7d4amuHGhjtYKujEs9YkJARzNEn4mRbWWv3fn4cdKdyh                                                   │
╰───────────────────────────────────────────────────────────────────────────────────────────────────╯
```

### 이벤트

_이벤트_가 발생했다면 이 섹션에서 볼 수 있습니다. 우리 패키지는 이벤트를 사용하지 않으므로 섹션이 비어 있습니다.

```plaintext
╭─────────────────────────────╮
│ No transaction block events │
╰─────────────────────────────╯
```

### Object 변경사항

이것들은 트랜잭션이 만든 _object_에 대한 변경사항입니다. 우리의 경우, 향후 패키지를 업그레이드할 수 있도록 하는 특별한 object인 새로운 `UpgradeCap` object를 _생성_하고, Gas object를 _변경_하고, 새 패키지를 _게시_했습니다. 패키지도 Sui의 object입니다.

```plaintext
╭──────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Object Changes                                                                                   │
├──────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Created Objects:                                                                                 │
│  ┌──                                                                                             │
│  │ ObjectID: 0x160f7856e13b27e5a025112f361370f4efc2c2659cb0023f1e99a8a84d1652f3                  │
│  │ Sender: 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1                    │
│  │ Owner: Account Address ( 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1 ) │
│  │ ObjectType: 0x2::package::UpgradeCap                                                          │
│  │ Version: 8                                                                                    │
│  │ Digest: 8y6bhwvQrGJHDckUZmj2HDAjfkyVqHohhvY1Fvzyj7ec                                          │
│  └──                                                                                             │
│ Mutated Objects:                                                                                 │
│  ┌──                                                                                             │
│  │ ObjectID: 0x4ea1303e4f5e2f65fc3709bc0fb70a3035fdd2d53dbcff33e026a50a742ce0de                  │
│  │ Sender: 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1                    │
│  │ Owner: Account Address ( 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1 ) │
│  │ ObjectType: 0x2::coin::Coin<0x2::sui::SUI>                                                    │
│  │ Version: 8                                                                                    │
│  │ Digest: 7ydahjaM47Gyb33PB4qnW2ZAGqZvDuWScV6sWPiv7LTc                                          │
│  └──                                                                                             │
│ Published Objects:                                                                               │
│  ┌──                                                                                             │
│  │ PackageID: 0x468daa33dfcb3e17162bbc8928f6ec73744bb08d838d1b6eb94eac99269b29fe                 │
│  │ Version: 1                                                                                    │
│  │ Digest: Ein91NF2hc3qC4XYoMUFMfin9U23xQmDAdEMSHLae7MK                                          │
│  │ Modules: todo_list                                                                            │
│  └──                                                                                             │
╰──────────────────────────────────────────────────────────────────────────────────────────────────╯
```

### 잔액 변경사항

이 마지막 섹션에는 SUI 코인의 변경사항이 포함되어 있습니다. 우리의 경우 약 0.015 SUI를 _소비_했으며, MIST로는 10,500,000입니다. 출력의 _amount_ 필드에서 확인할 수 있습니다.

```plaintext
╭───────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Balance Changes                                                                                   │
├───────────────────────────────────────────────────────────────────────────────────────────────────┤
│  ┌──                                                                                              │
│  │ Owner: Account Address ( 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1 )  │
│  │ CoinType: 0x2::sui::SUI                                                                        │
│  │ Amount: -10426280                                                                              │
│  └──                                                                                              │
╰───────────────────────────────────────────────────────────────────────────────────────────────────╯
```

### 대체 출력

게시 중에 `--json` 플래그를 지정하여 JSON 형식으로 출력을 받을 수 있습니다. 이는 출력을 프로그래밍 방식으로 구문 분석하거나 나중에 사용하기 위해 저장하려는 경우에 유용합니다.

```bash
$ sui client publish --gas-budget 100000000 --json
```

### 결과 사용하기

패키지가 체인에 게시된 후 상호작용할 수 있습니다. 이를 위해 패키지의 주소(object ID)를 찾아야 합니다. `Object Changes` 출력의 `Published Objects` 섹션 아래에 있습니다. 주소는 각 패키지마다 고유하므로 출력에서 복사해야 합니다.

이 예에서 주소는:

```plaintext
0x468daa33dfcb3e17162bbc8928f6ec73744bb08d838d1b6eb94eac99269b29fe
```

이제 주소가 있으므로 패키지와 상호작용할 수 있습니다. 다음 섹션에서는 트랜잭션을 보내 패키지와 상호작용하는 방법을 보여드리겠습니다.

## 트랜잭션 보내기

`todo_list` 패키지와의 상호작용을 시연하기 위해 새 목록을 생성하고 항목을 추가하는 트랜잭션을 보내겠습니다. 트랜잭션은 `sui client ptb` 명령어를 통해 전송되며, [트랜잭션 블록](./../concepts/what-is-a-transaction)을 최대한 활용할 수 있습니다. 명령어가 크고 복잡해 보일 수 있지만 단계별로 진행하겠습니다.

### 변수 준비하기

명령어를 구성하기 전에 트랜잭션에서 사용할 값들을 저장해 봅시다. `0x4....`를 게시한 패키지의 주소로 교체하세요. 그리고 `MY_ADDRESS` 변수는 CLI 출력에서 자동으로 설정됩니다.

```bash
$ export PACKAGE_ID=0x468daa33dfcb3e17162bbc8928f6ec73744bb08d838d1b6eb94eac99269b29fe
$ export MY_ADDRESS=$(sui client active-address)
```

### CLI에서 트랜잭션 구성하기

이제 실제 트랜잭션을 구성해 봅시다. 트랜잭션은 두 부분으로 구성됩니다: `todo_list` 패키지의 `new` 함수를 호출하여 새 목록을 생성하고, 목록 object를 우리 계정으로 전송합니다. 트랜잭션은 다음과 같습니다:

```bash
$ sui client ptb \
--gas-budget 100000000 \
--assign sender @$MY_ADDRESS \
--move-call $PACKAGE_ID::todo_list::new \
--assign list \
--transfer-objects "[list]" sender
```

이 명령어에서는 `ptb` 하위 명령어를 사용하여 트랜잭션을 구성합니다. 그 뒤에 오는 매개변수는 트랜잭션이 수행할 실제 명령어와 작업을 정의합니다. 처음 두 호출은 발신자 주소를 명령어 입력으로 설정하고 트랜잭션의 가스 예산을 설정하는 유틸리티 호출입니다.

```bash
# 트랜잭션의 가스 예산 설정
--gas-budget 100000000 \n
# 변수 "sender=@..." 등록
--assign sender @$MY_ADDRESS \n
```

그런 다음 패키지의 함수에 대한 실제 호출을 수행합니다. 패키지 ID, module 이름, 함수 이름이 뒤따르는 `--move-call`을 사용합니다. 이 경우 `todo_list` 패키지의 `new` 함수를 호출합니다.

```bash
# $PACKAGE_ID 주소 아래 "todo_list" 패키지의 "new" 함수 호출
--move-call $PACKAGE_ID::todo_list::new
```

우리가 정의한 함수는 실제로 값을 반환하며, 이를 저장해야 합니다. `--assign` 명령어를 사용하여 반환된 값에 이름을 지정합니다. 이 경우 `list`라고 부릅니다. 그런 다음 object를 우리 계정으로 전송합니다.

```bash
--move-call $PACKAGE_ID::todo_list::new \
# "new" 함수의 결과를 "list" 변수에 할당 (이전 단계에서)
--assign list \
# object를 발신자에게 전송
--transfer-objects "[list]" sender
```

명령어가 구성되면 터미널에서 실행할 수 있습니다. 모든 것이 정확하다면 이전 섹션과 유사한 출력을 볼 수 있어야 합니다. 출력에는 트랜잭션 다이제스트, 트랜잭션 데이터 및 트랜잭션 효과가 포함됩니다.

<details>
<summary><a>스포일러: 전체 트랜잭션 출력</a></summary>

```bash
Transaction Digest: BJwYEnuuMzU4Y8cTwMoJbbQA6cLwPmwxvsRpSmvThoK8
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Transaction Data                                                                                             │
├──────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Sender: 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1                                   │
│ Gas Owner: 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1                                │
│ Gas Budget: 100000000 MIST                                                                                  │
│ Gas Price: 1000 MIST                                                                                         │
│ Gas Payment:                                                                                                 │
│  ┌──                                                                                                         │
│  │ ID: 0xe5ddeb874a8d7ead328e9f2dd2ad8d25383ab40781a5f1aefa75600973b02bc4                                    │
│  │ Version: 22                                                                                               │
│  │ Digest: DiBrBMshDiD9cThpaEgpcYSF76uV4hCoE1qRyQ3rnYCB                                                      │
│  └──                                                                                                         │
│                                                                                                              │
│ Transaction Kind: Programmable                                                                               │
│ ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────╮ │
│ │ Input Objects                                                                                            │ │
│ ├──────────────────────────────────────────────────────────────────────────────────────────────────────────┤ │
│ │ 0   Pure Arg: Type: address, Value: "0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1" │ │
│ ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│ ╭──────────────────────────────────────────────────────────────────────────────────╮                         │
│ │ Commands                                                                         │                         │
│ ├──────────────────────────────────────────────────────────────────────────────────┤                         │
│ │ 0  MoveCall:                                                                     │                         │
│ │  ┌                                                                               │                         │
│ │  │ Function:  new                                                                │                         │
│ │  │ Module:    todo_list                                                          │                         │
│ │  │ Package:   0x468daa33dfcb3e17162bbc8928f6ec73744bb08d838d1b6eb94eac99269b29fe │                         │
│ │  └                                                                               │                         │
│ │                                                                                  │                         │
│ │ 1  TransferObjects:                                                              │                         │
│ │  ┌                                                                               │                         │
│ │  │ Arguments:                                                                    │                         │
│ │  │   Result 0                                                                    │                         │
│ │  │ Address: Input  0                                                             │                         │
│ │  └                                                                               │                         │
│ ╰──────────────────────────────────────────────────────────────────────────────────╯                         │
│                                                                                                              │
│ Signatures:                                                                                                  │
│    C5Lie4dtP5d3OkKzFBa+xM0BiNoB/A4ItthDCRTRBUrEE+jXeNs7mP4AuGwi3nzfTskh29+R1j1Kba4Wdy3QDA==                  │
│                                                                                                              │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭───────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Transaction Effects                                                                               │
├───────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Digest: BJwYEnuuMzU4Y8cTwMoJbbQA6cLwPmwxvsRpSmvThoK8                                              │
│ Status: Success                                                                                   │
│ Executed Epoch: 1213                                                                              │
│                                                                                                   │
│ Created Objects:                                                                                  │
│  ┌──                                                                                              │
│  │ ID: 0x74973c4ea2e78dc409f60481e23761cee68a48156df93a93fbcceb77d1cacdf6                         │
│  │ Owner: Account Address ( 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1 )  │
│  │ Version: 23                                                                                    │
│  │ Digest: DuHTozDHMsuA7cFnWRQ1Gb8FQghAEBaj3inasJxqYq1c                                           │
│  └──                                                                                              │
│ Mutated Objects:                                                                                  │
│  ┌──                                                                                              │
│  │ ID: 0xe5ddeb874a8d7ead328e9f2dd2ad8d25383ab40781a5f1aefa75600973b02bc4                         │
│  │ Owner: Account Address ( 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1 )  │
│  │ Version: 23                                                                                    │
│  │ Digest: 82fwKarGuDhtomr5oS6ZGNvZNw9QVXLSbPdQu6jQgNV7                                           │
│  └──                                                                                              │
│ Gas Object:                                                                                       │
│  ┌──                                                                                              │
│  │ ID: 0xe5ddeb874a8d7ead328e9f2dd2ad8d25383ab40781a5f1aefa75600973b02bc4                         │
│  │ Owner: Account Address ( 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1 )  │
│  │ Version: 23                                                                                    │
│  │ Digest: 82fwKarGuDhtomr5oS6ZGNvZNw9QVXLSbPdQu6jQgNV7                                           │
│  └──                                                                                              │
│ Gas Cost Summary:                                                                                 │
│    Storage Cost: 2318000 MIST                                                                     │
│    Computation Cost: 1000000 MIST                                                                 │
│    Storage Rebate: 978120 MIST                                                                    │
│    Non-refundable Storage Fee: 9880 MIST                                                          │
│                                                                                                   │
│ Transaction Dependencies:                                                                         │
│    FSz2fYXmKqTf77mFXNq5JK7cKY8agWja7V5yDKEgL8c3                                                   │
│    GgMZKTt482DYApbAZkPDtdssGHZLbxgjm2uMXhzJax8Q                                                   │
╰───────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────╮
│ No transaction block events │
╰─────────────────────────────╯

╭───────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Object Changes                                                                                        │
├───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Created Objects:                                                                                      │
│  ┌──                                                                                                  │
│  │ ObjectID: 0x74973c4ea2e78dc409f60481e23761cee68a48156df93a93fbcceb77d1cacdf6                       │
│  │ Sender: 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1                         │
│  │ Owner: Account Address ( 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1 )      │
│  │ ObjectType: 0x468daa33dfcb3e17162bbc8928f6ec73744bb08d838d1b6eb94eac99269b29fe::todo_list::TodoList  │
│  │ Version: 23                                                                                        │
│  │ Digest: DuHTozDHMsuA7cFnWRQ1Gb8FQghAEBaj3inasJxqYq1c                                               │
│  └──                                                                                                  │
│ Mutated Objects:                                                                                      │
│  ┌──                                                                                                  │
│  │ ObjectID: 0xe5ddeb874a8d7ead328e9f2dd2ad8d25383ab40781a5f1aefa75600973b02bc4                       │
│  │ Sender: 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1                         │
│  │ Owner: Account Address ( 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1 )      │
│  │ ObjectType: 0x2::coin::Coin<0x2::sui::SUI>                                                         │
│  │ Version: 23                                                                                        │
│  │ Digest: 82fwKarGuDhtomr5oS6ZGNvZNw9QVXLSbPdQu6jQgNV7                                               │
│  └──                                                                                                  │
╰───────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭───────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Balance Changes                                                                                   │
├───────────────────────────────────────────────────────────────────────────────────────────────────┤
│  ┌──                                                                                              │
│  │ Owner: Account Address ( 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1 )  │
│  │ CoinType: 0x2::sui::SUI                                                                        │
│  │ Amount: -2339880                                                                               │
│  └──                                                                                              │
╰───────────────────────────────────────────────────────────────────────────────────────────────────╯
```

</details>

우리가 집중하고자 하는 섹션은 "Object Changes"입니다. 보다 구체적으로 "Created Objects" 부분입니다. 여기에는 생성한 `TodoList`의 object ID, 타입 및 버전이 포함되어 있습니다. 이 object ID를 사용하여 목록과 상호작용하겠습니다.

```bash
╭───────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Object Changes                                                                                        │
├───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Created Objects:                                                                                      │
│  ┌──                                                                                                  │
│  │ ObjectID: 0x20e0bede16de8a728ab25e228816b9059b45ebea49c8ad384e044580b2d3e553                       │
│  │ Sender: 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1                         │
│  │ Owner: Account Address ( 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1 )      │
│  │ ObjectType: 0x468daa33dfcb3e17162bbc8928f6ec73744bb08d838d1b6eb94eac99269b29fe::todo_list::TodoList  │
│  │ Version: 22                                                                                        │
│  │ Digest: HyWdUpjuhjLY38dLpg6KPHQ3bt4BqQAbdF5gB8HQdEqG                                               │
│  └──                                                                                                  │
│ Mutated Objects:                                                                                      │
│  ┌──                                                                                                  │
│  │ ObjectID: 0xe5ddeb874a8d7ead328e9f2dd2ad8d25383ab40781a5f1aefa75600973b02bc4                       │
│  │ Sender: 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1                         │
│  │ Owner: Account Address ( 0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1 )      │
│  │ ObjectType: 0x2::coin::Coin<0x2::sui::SUI>                                                         │
│  │ Version: 22                                                                                        │
│  │ Digest: DiBrBMshDiD9cThpaEgpcYSF76uV4hCoE1qRyQ3rnYCB                                               │
│  └──                                                                                                  │
╰───────────────────────────────────────────────────────────────────────────────────────────────────────╯
```

이 예에서 object ID는 `0x20e0bede16de8a728ab25e228816b9059b45ebea49c8ad384e044580b2d3e553`입니다. 그리고 소유자는 당신의 계정 주소여야 합니다. 트랜잭션의 마지막 명령어에서 object를 발신자에게 전송하여 이를 달성했습니다.

목록을 성공적으로 생성했는지 테스트하는 다른 방법은 계정 object를 확인하는 것입니다.

```bash
$ sui client objects
```

다음과 유사한 object가 있어야 합니다:

```plaintext
╭  ...                                                                                  ╮
│ ╭────────────┬──────────────────────────────────────────────────────────────────────╮ │
│ │ objectId   │  0x20e0bede16de8a728ab25e228816b9059b45ebea49c8ad384e044580b2d3e553  │ │
│ │ version    │  22                                                                  │ │
│ │ digest     │  /DUEiCLkaNSgzpZSq2vSV0auQQEQhyH9occq9grMBZM=                        │ │
│ │ objectType │  0x468d..29fe::todo_list::TodoList                                   │ │
│ ╰────────────┴──────────────────────────────────────────────────────────────────────╯ │
|  ...                                                                                  |
```

### 함수에 Object 전달하기

이전 단계에서 생성한 TodoList는 소유자로서 상호작용할 수 있는 object입니다. 이 object에서 `todo_list` module에 정의된 함수를 호출할 수 있습니다. 이를 시연하기 위해 목록에 항목을 추가하겠습니다. 먼저 하나의 항목만 추가하고, 두 번째 트랜잭션에서는 3개를 추가하고 다른 하나를 제거하겠습니다.

[이전 단계](#변수-준비하기)에서 변수를 설정했는지 다시 확인하고 목록 object에 대한 변수를 하나 더 추가하세요.

```bash
$ export LIST_ID=0x20e0bede16de8a728ab25e228816b9059b45ebea49c8ad384e044580b2d3e553
```

이제 목록에 항목을 추가하는 트랜잭션을 구성할 수 있습니다. 명령어는 다음과 같습니다:

```bash
$ sui client ptb \
--gas-budget 100000000 \
--move-call $PACKAGE_ID::todo_list::add @$LIST_ID "'Hello, Sui 장을 완료하기'"
```

이 명령어에서는 `todo_list` 패키지의 `add` 함수를 호출합니다. 함수는 두 개의 인자를 받습니다: 목록 object와 추가할 항목. 항목은 문자열이므로 작은따옴표로 감싸야 합니다. 명령어는 목록에 항목을 추가합니다.

모든 것이 정확하다면 이전 섹션과 유사한 출력을 볼 수 있어야 합니다. 이제 목록 object를 확인하여 항목이 추가되었는지 확인할 수 있습니다.

```bash
$ sui client object $LIST_ID
```

출력에 추가한 항목이 포함되어야 합니다.

```plaintext
╭───────────────┬───────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ objectId      │  0x20e0bede16de8a728ab25e228816b9059b45ebea49c8ad384e044580b2d3e553                                               │
│ version       │  24                                                                                                               │
│ digest        │  FGcXH8MGpMs5BdTnC62CQ3VLAwwexYg2id5DKU7Jr9aQ                                                                     │
│ objType       │  0x468daa33dfcb3e17162bbc8928f6ec73744bb08d838d1b6eb94eac99269b29fe::todo_list::TodoList                          │
│ owner         │ ╭──────────────┬──────────────────────────────────────────────────────────────────────╮                           │
│               │ │ AddressOwner │  0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1  │                           │
│               │ ╰──────────────┴──────────────────────────────────────────────────────────────────────╯                           │
│ prevTx        │  EJVK6FEHtfTdCuGkNsU1HcrmUBEN6H6jshfcptnw8Yt1                                                                     │
│ storageRebate │  1558000                                                                                                          │
│ content       │ ╭───────────────────┬───────────────────────────────────────────────────────────────────────────────────────────╮ │
│               │ │ dataType          │  moveObject                                                                               │ │
│               │ │ type              │  0x468daa33dfcb3e17162bbc8928f6ec73744bb08d838d1b6eb94eac99269b29fe::todo_list::TodoList  │ │
│               │ │ hasPublicTransfer │  true                                                                                     │ │
│               │ │ fields            │ ╭───────┬───────────────────────────────────────────────────────────────────────────────╮ │ │
│               │ │                   │ │ id    │ ╭────┬──────────────────────────────────────────────────────────────────────╮ │ │ │
│               │ │                   │ │       │ │ id │  0x20e0bede16de8a728ab25e228816b9059b45ebea49c8ad384e044580b2d3e553  │ │ │ │
│               │ │                   │ │       │ ╰────┴──────────────────────────────────────────────────────────────────────╯ │ │ │
│               │ │                   │ │ items │ ╭─────────────────────────────────╮                                           │ │ │
│               │ │                   │ │       │ │  Hello, Sui 장을 완료하기  │                                           │ │ │
│               │ │                   │ │       │ ╰─────────────────────────────────╯                                           │ │ │
│               │ │                   │ ╰───────┴───────────────────────────────────────────────────────────────────────────────╯ │ │
│               │ ╰───────────────────┴───────────────────────────────────────────────────────────────────────────────────────────╯ │
╰───────────────┴───────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
```

명령어에 `--json` 플래그를 추가하여 object의 JSON 표현을 얻을 수 있습니다.

```bash
$ sui client object $LIST_ID --json
```

```json
{
  "objectId": "0x20e0bede16de8a728ab25e228816b9059b45ebea49c8ad384e044580b2d3e553",
  "version": "24",
  "digest": "FGcXH8MGpMs5BdTnC62CQ3VLAwwexYg2id5DKU7Jr9aQ",
  "type": "0x468daa33dfcb3e17162bbc8928f6ec73744bb08d838d1b6eb94eac99269b29fe::todo_list::TodoList",
  "owner": {
    "AddressOwner": "0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1"
  },
  "previousTransaction": "EJVK6FEHtfTdCuGkNsU1HcrmUBEN6H6jshfcptnw8Yt1",
  "storageRebate": "1558000",
  "content": {
    "dataType": "moveObject",
    "type": "0x468daa33dfcb3e17162bbc8928f6ec73744bb08d838d1b6eb94eac99269b29fe::todo_list::TodoList",
    "hasPublicTransfer": true,
    "fields": {
      "id": {
        "id": "0x20e0bede16de8a728ab25e228816b9059b45ebea49c8ad384e044580b2d3e553"
      },
      "items": ["Hello, Sui 장을 완료하기"]
    }
  }
}
```

### 명령어 체이닝

단일 트랜잭션에서 여러 명령어를 체인할 수 있습니다. 이것이 트랜잭션 블록의 힘을 보여줍니다! 동일한 목록 object를 사용하여 항목 3개를 더 추가하고 하나를 제거하겠습니다. 명령어는 다음과 같습니다:

```bash
$ sui client ptb \
--gas-budget 100000000 \
--move-call $PACKAGE_ID::todo_list::add @$LIST_ID "'개념 장 완료하기'" \
--move-call $PACKAGE_ID::todo_list::add @$LIST_ID "'Move 기초 장 읽기'" \
--move-call $PACKAGE_ID::todo_list::add @$LIST_ID "'Object 모델에 대해 배우기'" \
--move-call $PACKAGE_ID::todo_list::remove @$LIST_ID 0
```

이전 명령어가 성공했다면 이것도 다르지 않을 것입니다. 목록 object를 확인하여 항목이 추가되고 제거되었는지 확인할 수 있습니다. JSON 표현이 좀 더 읽기 쉽습니다!

```bash
sui client object $LIST_ID --json
```

```json
{
  "objectId": "0x20e0bede16de8a728ab25e228816b9059b45ebea49c8ad384e044580b2d3e553",
  "version": "25",
  "digest": "EDTXDsteqPGAGu4zFAj5bbQGTkucWk4hhuUquk39enGA",
  "type": "0x468daa33dfcb3e17162bbc8928f6ec73744bb08d838d1b6eb94eac99269b29fe::todo_list::TodoList",
  "owner": {
    "AddressOwner": "0x091ef55506ad814920adcef32045f9078f2f6e9a72f4cf253a1e6274157380a1"
  },
  "previousTransaction": "7SXLGBSh31jv8G7okQ9mEgnw5MnTfvzzHEHpWf3Sa9gY",
  "storageRebate": "1922800",
  "content": {
    "dataType": "moveObject",
    "type": "0x468daa33dfcb3e17162bbc8928f6ec73744bb08d838d1b6eb94eac99269b29fe::todo_list::TodoList",
    "hasPublicTransfer": true,
    "fields": {
      "id": {
        "id": "0x20e0bede16de8a728ab25e228816b9059b45ebea49c8ad384e044580b2d3e553"
      },
      "items": [
        "개념 장 완료하기",
        "Move 기초 장 읽기",
        "Object 모델에 대해 배우기"
      ]
    }
  }
}
```

명령어는 동일한 패키지에 있거나 동일한 object에서 작동할 필요가 없습니다. 단일 트랜잭션 블록 내에서 여러 패키지 및 object와 상호작용할 수 있습니다. 이는 체인상에서 복잡한 상호작용을 구축할 수 있게 해주는 강력한 기능입니다!

## 결론

이 가이드에서는 Move 블록체인에 패키지를 게시하고 Sui CLI를 사용하여 상호작용하는 방법을 보여주었습니다. 새 목록 object를 생성하고 항목을 추가하고 제거하는 방법을 시연했습니다. 또한 단일 트랜잭션 블록에서 여러 명령어를 체인하는 방법도 보여주었습니다. 이 가이드는 Sui 블록체인에서 자체 애플리케이션을 구축하기 위한 좋은 출발점을 제공해야 합니다!