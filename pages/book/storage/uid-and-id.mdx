# UID와 ID

`UID` 타입은 `sui::object` module에 정의되어 있으며 `ID`를 감싸는 래퍼이고,
`ID`는 다시 `address` 타입을 감쌉니다. Sui의 UID들은 고유하다는 것이 보장되며,
object가 삭제된 후에는 재사용할 수 없습니다.

```move
module sui::object;

/// UID는 object의 고유 식별자입니다
public struct UID has store {
    id: ID
}

/// ID는 address를 감싸는 래퍼입니다
public struct ID has store, drop {
    bytes: address
}
```

{/* 사용자는 아직 TxContext에 대해 모릅니다... */}

## 새로운 UID 생성:

- UID는 `tx_hash`와 각 새 UID마다 증가하는 `index`에서 파생됩니다.
- `derive_id` 함수는 `sui::tx_context` module에 구현되어 있으며, 이것이 UID 생성에
  TxContext가 필요한 이유입니다.
- Sui Verifier는 같은 함수에서 생성되지 않은 UID의 사용을 허용하지 않습니다. 이는
  UID가 미리 생성되어 object가 언패킹된 후 재사용되는 것을 방지합니다.

새로운 UID는 `object::new(ctx)` 함수로 생성됩니다. 이 함수는 TxContext에 대한 가변 참조를
받아 새로운 UID를 반환합니다.

```move
let ctx = &mut tx_context::dummy();
let uid = object::new(ctx);
```

Sui에서 `UID`는 object의 표현으로 작동하며, object의 동작과 기능을 정의할 수
있게 합니다. 주요 기능 중 하나인 [동적 필드](./../programmability/dynamic-fields)는
`UID` 타입이 명시적이기 때문에 가능합니다. 추가적으로,
[Transfer to Object (TTO)](https://docs.sui.io/concepts/transfers/transfer-to-object)를 허용하며,
이는 이 챕터에서 나중에 설명할 것입니다.

## UID 생명주기

`UID` 타입은 `object::new(ctx)` 함수로 생성되고, `object::delete(uid)` 함수로
파기됩니다. `object::delete`는 UID를 _값으로_ 소비하며, 값이 Object에서
언패킹되지 않았다면 삭제할 수 없습니다.

```move
let ctx = &mut tx_context::dummy();

let char = Character {
    id: object::new(ctx)
};

let Character { id } = char;
id.delete();
```

## UID 유지하기

`UID`는 object struct가 언패킹된 후 즉시 삭제될 필요가 없습니다. 때로는
[동적 필드](./../programmability/dynamic-fields)를 가지거나
[Transfer To Object](./transfer-to-object)를 통해 전송된 object들을 가질 수 있습니다.
이러한 경우, UID는 유지되어 별도의 object에 저장될 수 있습니다.

## 삭제 증명

object의 UID를 반환하는 능력은 _삭제 증명_이라고 불리는 패턴에 활용될 수 있습니다.
드물게 사용되는 기법이지만 일부 경우에 유용할 수 있습니다. 예를 들어, 생성자나
애플리케이션이 삭제된 ID를 보상과 교환하여 object 삭제를 장려할 수 있습니다.

프레임워크 개발에서 이 방법은 object를 "가져가는" 것에 대한 특정 제한을 무시/우회하는 데
사용될 수 있습니다. Kiosk처럼 전송에 특정 논리를 강제하는 컨테이너가 있다면,
삭제 증명을 제공하여 검사를 건너뛰는 특별한 시나리오가 있을 수 있습니다.

이는 탐구와 연구를 위한 열린 주제 중 하나이며, 다양한 방식으로 사용될 수 있습니다.

## ID

`UID`에 대해 이야기할 때 `ID` 타입도 언급해야 합니다. 이는 `address`
타입을 감싸는 래퍼이며, 주소 포인터를 나타내는 데 사용됩니다. 일반적으로 `ID`는 object를
가리키는 데 사용되지만, 제한이 없으며 `ID`가 기존 object를 가리킨다는 보장도 없습니다.

> ID는 [트랜잭션 블록](./../concepts/what-is-a-transaction)에서 트랜잭션 인자로
> 받을 수 있습니다. 또는 `to_id()` 함수를 사용하여 `address` 값에서
> ID를 생성할 수 있습니다.

{/*
```move

TODO: !!!!

```
*/}

## fresh_object_address

TxContext는 고유한 주소와 `ID`를 생성하는 데 활용할 수 있는 `fresh_object_address`
함수를 제공합니다 - 이는 사용자 행동에 고유 식별자를 할당하는 일부 애플리케이션에서
유용할 수 있습니다 - 예를 들어, 마켓플레이스의 order_id.
